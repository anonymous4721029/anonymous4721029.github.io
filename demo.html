<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Demo page</title>

    <style>
      ul.pub {line-height: 20px;}
      ul.pub li {margin-bottom: 10px;}
      ol.multi-column {float: left; width: 100%; line-height: 10px;}
      ol.multi-column li {float: left; width: 50%; margin-bottom: 10px;}
    </style>

  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <h1 id="project_title">Polyphonic rhythm transcription</h1>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">


        <h2>Abstract</h2>

A rhythm transcription algorithm converts a MIDI performance to a music score representation. We show results of comparing three HMM-based algorithms; <strong><font color="#005B50">note HMM</font></strong> [1,2], <strong><font color="#005B50">metrical HMM</font></strong> [3,4], and <strong><font color="#005B50">merged-output HMM</font></strong> [5]. As an evaluation measure, we use the rhythm correction cost (<font color="#ff0080">RCC</font>), which is defined as the least number of operations to correct an estimated result. For details, see our paper [5,6].<br>
<br>
You can <font color="#ff0080">download programming codes</font> and see the list of training data <a href="algorithms.html">here</a>.


        <h3>References</h3>
        　[1] T. Otsuki, N. Saitou, M. Nakai, H. Shimodaira and S. Sagayama, "Musical Rhythm Recognition Using Hidden Markov Model (in Japanese)," J. Information Processing Society of Japan, 43(2), pp. 245-255, 2002.<br>
        　[2] H. Takeda, T. Nishimoto and S. Sagayama, "Rhythm and Tempo Analysis Toward Automatic Music Transcription," Proc. ICASSP, vol. 4, pp. 1317-1320, 2007.<br>
        　[3] C. Raphael, "Automated Rhythm Transcription," Proc. ISMIR, pp. 99-107, 2001.<br>
        　[4] M. Hamanaka, M. Goto, H. Asoh and N. Otsu, "A Learning-Based Quantization: Unsupervised Estimation of the Model Parameters," Proc. ICMC, pp. 369-372, 2003.<br>
        　[5] E. Nakamura, K. Yoshii and S. Sagayama, "Rhythm Transcription of Polyphonic MIDI Performances Based on a Merged-Output HMM for Multiple Voices," Proc. SMC, pp. 338-343, 2016.<br>
        　[6] E. Nakamura, K. Yoshii and S. Sagayama, "Rhythm Transcription of Polyphonic Piano Music Based on Merged-Output HMM for Multiple Voices," submitted to ACM/IEEE TASLP.<br>

        <h2>Test data sets</h2>

The used data consist of two sets, the <strong><font color="#005B50">polyrhythmic data set</font></strong> and the <strong><font color="#005B50">non-polyrhythmic data set</font></strong>, each of which contains 30 excerpts of classical piano music. The polyrhythmic data set is composed of pieces that contained 2 against 3 or 3 against 4 polyrhythmic passages, and the non-polyrhythmic data set is composed of pieces that did not contain polyrhythmic passages.

        <h3>Polyrhythmic data set</h3>

        <ol class="multi-column">
          <li>Brahms: Intermezzo Op. 118-2 Bar 48-55
          <li>Chopin: Fantasie Impromptu Bar 13-16
          <li>Debussy: Arabesque No. 1 Bar 6-9
          <li>Debussy: Arabesque No. 1 Bar 19-21
          <li>Debussy: Arabesque No. 1 Bar 76-79
          <li>Debussy: Arabesque No. 1 Bar 89-94
          <li>Brahms: Intermezzo Op. 118-2 Bar 48-55 (2nd time)
          <li>Brahms: Intermezzo Op. 118-2 Bar 64-71
          <li>Chopin: Fantaisie Impromptu Bar 5-8
          <li>Chopin: Fantaisie Impromptu Bar 31-34
          <li>Beethoven: 32 Variations, Var 9
          <li>Beethoven: 32 Variations, Var 16
          <li>Brahms: Paganini Variations Book 1 Var 5 Bar 1-8
          <li>Brahms: Paganini Variations Book 1 Var 9 Bar 1-8
          <li>Brahms: Paganini Variations Book 1 Var 12 Bar 5-15
          <li>Brahms: Paganini Variations Book 2 Var 1 Bar 5-8
          <li>Brahms: Paganini Variations Book 2 Var 1 Bar 9-16
          <li>Brahms: Paganini Variations Book 2 Var 2 Bar 1-8
          <li>Brahms: Paganini Variations Book 2 Var 5 Bar 5-10
          <li>Brahms: Paganini Variations Book 2 Var 14 Coda
          <li>Brahms: Paganini Variations Book 1 Var 5 Bar 9-16
          <li>Brahms: Paganini Variations Book 1 Var 9 Bar 5-12
          <li>Brahms: Paganini Variations Book 2 Var 2 Bar 9-24
          <li>Rachmaninoff: Corelli Variations Coda
          <li>Chopin: Piano Sonata No. 3 Mov. 1 Bar 41-50
          <li>Schubert: Piano Sonata No. 21 Mov. 1 Bar 167-172
          <li>Schubert: Piano Sonata No. 21 Mov. 4 Bar 309-324
          <li>Liszt: Dante Sonata, Piu Tosto
          <li>Ravel: Jeu d'Eau Bar 41-45
          <li>Ravel: Jeu d'Eau Bar 46-47
        </ol>

        <h3>Non-polyrhythmic data set</h3>

        <ol class="multi-column">
          <li>Bach: Invention No. 1 Bar 15-18
          <li>Bach: Invention No. 2 Bar 19-22
          <li>Bach: Well Tempered Clavier Book 1 Prelude No. 13 Bar 24-30
          <li>Bach: Well Tempered Clavier Book 2 Fugue No. 2 Bar 14-23
          <li>Bach: Well Tempered Clavier Book 2 Fugue No. 19 Bar 1-6
          <li>Bartok: Romanian Dance No. 2 Bar 1-16
          <li>Bartok: Romanian Dance No. 4 Bar 1-18
          <li>Beethoven: Piano Sonata No. 14 Mov. 1 Bar 1-14
          <li>Beethoven: Piano Sonata No. 14 Mov. 2 Bar 1-16
          <li>Beethoven: Piano Sonata No. 14 Mov. 2 Bar 56-64
          <li>Beethoven: Piano Sonata No. 17 Mov. 1 Bar 29-45
          <li>Beethoven: Piano Sonata No. 17 Mov. 1 Bar 52-63
          <li>Beethoven: Piano Sonata No. 20 Mov. 1 Bar 15-19
          <li>Beethoven: Piano Sonata No. 20 Mov. 1 Bar 20-28
          <li>Beethoven: Piano Sonata No. 23 Mov. 2 Bar 1-8
          <li>Beethoven: Piano Sonata No. 23 Mov. 2 Bar 17-24
          <li>Chopin: Ballade No. 2 Bar 1-10
          <li>Chopin: Etude No. 23 Bar 5-12
          <li>Chopin: Mazurka Op. 7-1 Bar 25-28
          <li>Debussy: Prelude No. 8 Bar 1-7
          <li>Mozart: Piano Sonata No. 11 Mov. 1 Bar 1-8
          <li>Mozart: Piano Sonata No. 17 Mov. 2 Bar 1-4
          <li>Beethoven: 32 Variations, Var 15
          <li>Schumann: Kreisleriana Op. 16-1, Bar 1-8
          <li>Schumann: Kreisleriana Op. 16-8, Bar 1-16
          <li>Schumann: Carnaval Op. 9-2, Bar 1-31
          <li>Schumann: Carnaval Op. 9-4, Bar 1-16
          <li>Schumann: Carnaval Op. 9-16, Bar 1-25
          <li>Mendelssohn: Variations Serieuses Var 10
          <li>Mendelssohn: Variations Serieuses Var 14
        </ol>

        <h2>Demonstrations</h2>

Examples of rhythm transcription are shown. Each algorithm outputs quantised score times of the notes in an input MIDI performance. Score typesetting (e.g. beaming) is done manually to make the results clearer. For the merged-output HMM, the notes are grouped into two voices shown in the upper and lower staves. 

        <h3>Good examples</h3>
        Examples in which the merged-output HMM outperformed the other HMMs. These examples contain 2 against 3 or 3 against 4 polyrhythms.

        <h4><font color="#0000cc">Example 1</font> (Chopin: Fantaisie Impromptu)</h4>

        <h5>・Input performance ( <a href="audio/20-1.mp3">mp3</a>　<a href="audio/20-1.mid">MIDI</a> )</h5>
        <img src="images/20-1.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Correct transcription (original score) ( <a href="audio/20.mp3">mp3</a>　<a href="audio/20.mid">MIDI</a> )</h5>
        <img src="images/20.png" width="1000" alt="Picture"/>
        <br>
        Upper staff:  <a href="audio/20_R.mp3">mp3</a>　<a href="audio/20_R.mid">MIDI</a><br>
        Lower staff:  <a href="audio/20_L.mp3">mp3</a>　<a href="audio/20_L.mid">MIDI</a><br>

        <h5>・Result by merged-output HMM ( Upper staff: <a href="audio/20-1_MOHMM_R.mp3">mp3</a>　<a href="audio/20-1_MOHMM_R.mid">MIDI</a>　　Lower staff: <a href="audio/20-1_MOHMM_L.mp3">mp3</a>　<a href="audio/20-1_MOHMM_L.mid">MIDI</a> )　<font color="#ff0080">RCC = 7</font></h5>
        <img src="images/20-1_MOHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by note HMM ( <a href="audio/20-1_NoteHMM.mp3">mp3</a>　<a href="audio/20-1_NoteHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 66</font></h5>
        <img src="images/20-1_NoteHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by metrical HMM ( <a href="audio/20-1_MetricalHMM.mp3">mp3</a>　<a href="audio/20-1_MetricalHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 64</font></h5>
        <img src="images/20-1_MetricalHMM.png" width="1000" alt="Picture"/>
        <br>

        <br>

        <h4><font color="#0000cc">Example 2</font> (Debussy: Arabesque No. 1)</h4>

        <h5>・Input performance ( <a href="audio/27-1.mp3">mp3</a>　<a href="audio/27-1.mid">MIDI</a> )</h5>
        <img src="images/27-1.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Correct transcription (original score) ( <a href="audio/27.mp3">mp3</a>　<a href="audio/27.mid">MIDI</a> )</h5>
        <img src="images/27.png" width="1000" alt="Picture"/>
        <br>
        Upper staff:  <a href="audio/27_R.mp3">mp3</a>　<a href="audio/27_R.mid">MIDI</a><br>
        Lower staff:  <a href="audio/27_L.mp3">mp3</a>　<a href="audio/27_L.mid">MIDI</a><br>

        <h5>・Result by merged-output HMM ( Upper staff: <a href="audio/27-1_MOHMM_R.mp3">mp3</a>　<a href="audio/27-1_MOHMM_R.mid">MIDI</a>　　Lower staff: <a href="audio/27-1_MOHMM_L.mp3">mp3</a>　<a href="audio/27-1_MOHMM_L.mid">MIDI</a> )　<font color="#ff0080">RCC = 1</font></h5>
        <img src="images/27-1_MOHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by note HMM ( <a href="audio/27-1_NoteHMM.mp3">mp3</a>　<a href="audio/27-1_NoteHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 12</font></h5>
        <img src="images/27-1_NoteHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by metrical HMM ( <a href="audio/27-1_MetricalHMM.mp3">mp3</a>　<a href="audio/27-1_MetricalHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 12</font></h5>
        <img src="images/27-1_MetricalHMM.png" width="1000" alt="Picture"/>
        <br>

        <br>

        <h4><font color="#0000cc">Example 3</font> (Beethoven: 32 Variations, Var. 9)</h4>

        <h5>・Input performance ( <a href="audio/34-1.mp3">mp3</a>　<a href="audio/34-1.mid">MIDI</a> )</h5>
        <img src="images/34-1.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Correct transcription ( <a href="audio/34.mp3">mp3</a>　<a href="audio/34.mid">MIDI</a> )</h5>
        <img src="images/34.png" width="1000" alt="Picture"/>
        <br>
        Upper staff:  <a href="audio/34_R.mp3">mp3</a>　<a href="audio/34_R.mid">MIDI</a><br>
        Lower staff:  <a href="audio/34_L.mp3">mp3</a>　<a href="audio/34_L.mid">MIDI</a><br>

        <h5>・Result by merged-output HMM ( Upper staff: <a href="audio/34-1_MOHMM_R.mp3">mp3</a>　<a href="audio/34-1_MOHMM_R.mid">MIDI</a>　　Lower staff: <a href="audio/34-1_MOHMM_L.mp3">mp3</a>　<a href="audio/34-1_MOHMM_L.mid">MIDI</a> )　<font color="#ff0080">RCC = 7</font></h5>
        <img src="images/34-1_MOHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by note HMM ( <a href="audio/34-1_NoteHMM.mp3">mp3</a>　<a href="audio/34-1_NoteHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 75</font></h5>
        <img src="images/34-1_NoteHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by metrical HMM ( <a href="audio/34-1_MetricalHMM.mp3">mp3</a>　<a href="audio/34-1_MetricalHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 96</font></h5>
        <img src="images/34-1_MetricalHMM.png" width="1000" alt="Picture"/>
        <br>

        <br>


        <h3>Bad examples</h3>
        Examples in which the merged-output HMM performed worse than the other HMMs.


        <h4><font color="#0000cc">Example 4</font> (Bach: Two-part invention No. 1 C-dur)</h4>

        <h5>・Input performance ( <a href="audio/1-1.mp3">mp3</a>　<a href="audio/1-1.mid">MIDI</a> )</h5>
        <img src="images/1-1.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Correct transcription (original score) ( <a href="audio/1.mp3">mp3</a>　<a href="audio/1.mid">MIDI</a> )</h5>
        <img src="images/1.png" width="1000" alt="Picture"/>
        <br>
        Upper staff:  <a href="audio/1_R.mp3">mp3</a>　<a href="audio/1_R.mid">MIDI</a><br>
        Lower staff:  <a href="audio/1_L.mp3">mp3</a>　<a href="audio/1_L.mid">MIDI</a><br>

        <h5>・Result by merged-output HMM ( Upper staff: <a href="audio/1-1_MOHMM_R.mp3">mp3</a>　<a href="audio/1-1_MOHMM_R.mid">MIDI</a>　　Lower staff: <a href="audio/1-1_MOHMM_L.mp3">mp3</a>　<a href="audio/1-1_MOHMM_L.mid">MIDI</a> )　<font color="#ff0080">RCC = 2</font></h5>
        <img src="images/1-1_MOHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by note HMM ( <a href="audio/1-1_NoteHMM.mp3">mp3</a>　<a href="audio/1-1_NoteHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 0</font></h5>
        <img src="images/1-1_NoteHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by metrical HMM ( <a href="audio/1-1_MetricalHMM.mp3">mp3</a>　<a href="audio/1-1_MetricalHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 0</font></h5>
        <img src="images/1-1_MetricalHMM.png" width="1000" alt="Picture"/>
        <br>

        <br>

        <h4><font color="#0000cc">Example 5</font> (Bach: The well tempered clavier book II No. 19 A-dur Fugue)</h4>

        <h5>・Input performance ( <a href="audio/5-1.mp3">mp3</a>　<a href="audio/5-1.mid">MIDI</a> )</h5>
        <img src="images/5-1.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Correct transcription (original score) ( <a href="audio/5.mp3">mp3</a>　<a href="audio/5.mid">MIDI</a> )</h5>
        <img src="images/5.png" width="1000" alt="Picture"/>
        <br>
        Upper staff:  <a href="audio/5_R.mp3">mp3</a>　<a href="audio/5_R.mid">MIDI</a><br>
        Lower staff:  <a href="audio/5_L.mp3">mp3</a>　<a href="audio/5_L.mid">MIDI</a><br>

        <h5>・Result by merged-output HMM ( Upper staff: <a href="audio/5-1_MOHMM_R.mp3">mp3</a>　<a href="audio/5-1_MOHMM_R.mid">MIDI</a>　　Lower staff: <a href="audio/5-1_MOHMM_L.mp3">mp3</a>　<a href="audio/5-1_MOHMM_L.mid">MIDI</a> )　<font color="#ff0080">RCC = 5</font></h5>
        <img src="images/5-1_MOHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by note HMM ( <a href="audio/5-1_NoteHMM.mp3">mp3</a>　<a href="audio/5-1_NoteHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 2</font></h5>
        <img src="images/5-1_NoteHMM.png" width="1000" alt="Picture"/>
        <br>

        <h5>・Result by metrical HMM ( <a href="audio/5-1_MetricalHMM.mp3">mp3</a>　<a href="audio/5-1_MetricalHMM.mid">MIDI</a> )　<font color="#ff0080">RCC = 0</font></h5>
        <img src="images/5-1_MetricalHMM.png" width="1000" alt="Picture"/>
        <br>

        <h2>Contact</h2>
          <a href="http://eita-nakamura.github.io">Eita Nakamura</a><br>
          Research Bldg. No. 7 Room 417, Yoshida-honmachi, Sakyo-ku, Kyoto 606-8501, Japan<br>
          <strong>e-mail:</strong> enakamura[at]sap.ist.i.kyoto-u.ac[dot]jp<br>
          <strong>phone:</strong> +81-075-753-4952<br>

      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Maintained by Eita Nakamura　　　　(Last updated: 2016 Dec)</p>
      </footer>
    </div>

  </body>
</html>
